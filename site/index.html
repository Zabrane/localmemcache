<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Localmemcache</title>
    <link type="text/css" rel="stylesheet" href="style.css" media="screen"/>
  </head>
  <body>  

<div id="content">
<h1>The beauty of memcached.&nbsp;&nbsp;For local data.&nbsp;&nbsp;Blazingly fast.</h1>

<p><b>Localmemcache</b> is a library for C and ruby that aims to provide
an interface similar to memcached but for accessing local data instead of
remote data.  It's based on <b>mmap()</b>'ed shared memory for maximum speed.

<h2>Changes for 0.2.1</h2>

<li>Fixed a bug that prevented setting values in the hashtable</li>
<li>Accessing a closed memory cache does no longer result in a crash</li>
<li><b>Speed improvements</b>: On my machine localmemcache is now only
about <b>20</b>% slower than Ruby's hash (<b>0.2.0</b> was about 
<b>40</b>% slower)</li>
<li><b>OS X is now officially not supported</b> as it lacks sem_timedwait and
sem_getvalue (You still can force a build but it won't be able to
recover from crashes.)</li>
<li>The environment variable <b>LMC_NAMESPACES_ROOT_PATH</b> can now be
used to override the default, which is <b>/var/tmp/localmemcache</b></li>


<h2>New features in 0.2.0</h2>

<li><b>Logging</b>: In case your application is terminated while
accessing the shared memory (eg by <b>kill -9</b>), it is now able to
<b>restore the integrity of your data</b>.</li>
<li><b>\0 character</b> can now be used in <b>keys</b> and
<b>values</b></li>
<li>The ruby binding now features a <b>keys()</b> method.</b>
<li>Added a <b>C API</b>.  See <a href="http://github.com/sck/localmemcache/blob/8c753f74c53b107d271975bedcc1f91a3dbd6961/src/localmemcache.h">localmemcache.h</a></li>

<h2>Supported Systems</h2>

<li>Unix (for <b>mmap())</b></li>
<li>OS X is currently not supported because it doesn't have
sem_timedwait() and sem_getvalue()</li>
<li>A CPU architecture with more than <b>32 bits</b> is recommended, since
otherwise you might run out of virtual address space when you use larger
shared memory segments.</li>

<h2>Install</h2>

<p>The Ruby binding is available as a Ruby Gem. It can be installed by executing</p>

<pre><code>gem install localmemcache
</code></pre>

If you just want to use the <b>C API</b>, download the .tar.gz from <a href="http://rubyforge.org/frs/?group_id=7925">here</a>.

<h2>Using</h2>
<p><pre><code>require 'localmemcache'
$lm = LocalMemCache.new :namespace => :viewcounters
$lm[:foo] = 1
$lm[:foo]
$lm.delete(:foo)
</code></pre> 
(C version of this example: <a href="http://github.com/sck/localmemcache/blob/8c753f74c53b107d271975bedcc1f91a3dbd6961/example/hello.c">hello.c</a>)
</p>
<a href="http://github.com/sck/localmemcache/tree/master">Read more</a>.

<h2>Performance</h2>

<p>Here's a quick speed comparison, made on an 
<b>Intel(R) Xeon(R) CPU E5205 @ 1.86GHz</b>:</p>
Ruby benchmark pseudo code:
<pre><code>2_000_000.times {
  index = rand(10000).to_s
  $hash.set(index, index)
  $hash.get(index)
}
</code></pre>

<pre>
MemCache:            <b>253,326.122</b> ms
LocalMemCache 0.2.1: <b>5,799.225</b> ms
Ruby's Hash:         <b>4,963.313</b> ms
</pre>

So, on my machine <b>Localmemcache</b> 0.2.1 is about <b>43</b> times
faster than using memcached locally, and about <b>20</b>% slower than
Ruby's hash.

<h2>Source code</h2>

<p>The source code is hosted on <a href="http://github.com/sck/localmemcache/tree/master">github</a>. It
can be retrieved by executing</p>

<pre><code>git clone git://github.com/sck/localmemcache.git
</code></pre>

<h2>Read on</h2>

A bit of documenation on how <b>localmemcache</b> <a
href="http://github.com/sck/localmemcache/blob/96b5e0863e1da7f17e249a6c8884984e0c23ee2f/INTERNALS">works</a>.

<h2>License</h2>

<p>Copyright (c) 2009 Sven C. Koehler (schween at s n a f u dot de)<br>
Localmemcache is freely distributable under the terms of an 
<a href="http://github.com/sck/localmemcache/blob/af51a7d10e7162551e0cb1cf1b1635c1c76fe8d2/COPYING">MIT-style license</a>.
</p>

</div>

  </body>
</html>
